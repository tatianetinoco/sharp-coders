<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>08 - API Assíncrona</title>

  <script>
 
 // Requisição
  async function requisicao(){
    let requisicao = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151')
    let pokemons = await requisicao.json()
    pokemons.results.map(linha => {requisicaoPokemon(linha.url)});
 }

 // Requisição de Pokémons
 async function requisicaoPokemon(url){
  // Requisição
  let requisicao = await fetch(url)
  let pokemon = await requisicao.json();
  //console.log(pokemon.name)
  //console.log(url)

  //Obter o elemento listagem
  let listagem = document.getElementById("listagem");
  
  //Criar elemento de img
  let imagem = document.createElement('img')

  // Adicionar a imagem do Pokémon
  imagem.src = pokemon.sprites.front_default;

  // Criar elemento de texto
  let texto = document.createElement('p');

  // Adicionar texto
  texto.innerText = pokemon.name;

  // Adicionar a imagem na div listagem
  listagem.appendChild(imagem);
  listagem.appendChild(texto);
 }

 // Executar a função 
  //requisicao()
  window.onload = function(){
    requisicao();
  }

  </script>


</head>
<body>

  <div id="listagem"></div>
  
</body>
</html>
